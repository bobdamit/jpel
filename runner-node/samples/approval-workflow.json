{
	"id": "approval-workflow",
	"name": "Document Approval Workflow",
	"description": "A process demonstrating conditional branching and multi-step approvals",
	"version": "1.0.0",
	"start": "a:approvalSequence",
	"variables": [
		{
			"name": "finalStatus",
			"type": "text",
			"description": "Final approval status"
		}
	],
	"activities": {
		"approvalSequence": {
			"name": "Document Approval Sequence",
			"type": "sequence",
			"activities": [
				"a:submitDocument",
				"a:reviewDocument",
				"a:processDecision"
			]
		},
		"submitDocument": {
			"name": "Submit Document for Approval",
			"type": "human",
			"prompt": "Please provide document details for approval:",
			"inputs": [
				{
					"name": "documentTitle",
					"type": "string",
					"label": "Document Title",
					"required": true,
					"placeholder": "Enter document title",
					"pattern": "^[\\w\\s]{5,100}$",
					"patternDescription": "Title must be 5-100 characters, letters and spaces only"
				},
				{
					"name": "documentType",
					"type": "select",
					"label": "Document Type",
					"required": true,
					"options": [
						"policy",
						"procedure",
						"manual"
					]
				}
			]
		},
		"reviewDocument": {
			"name": "Review Document",
			"type": "human",
			"prompt": "Please review the document and make your decision:",
			"inputs": [
				{
					"name": "approverDecision",
					"type": "select",
					"label": "Approval Decision",
					"required": true,
					"options": [
						"approved",
						"rejected",
						"needs-revision"
					]
				}
			]
		},
		"processDecision": {
			"name": "Process Approval Decision",
			"type": "switch",
			"expression": "a:reviewDocument.v:approverDecision",
			"cases": {
				"approved": "a:documentApproved",
				"rejected": "a:documentRejected",
				"needs-revision": "a:documentNeedsRevision"
			},
			"default": "a:documentRejected"
		},
		"documentApproved": {
			"id": "documentApproved",
			"name": "Document Approved",
			"type": "compute",
			"code": [
				"// Document was approved",
				"v:finalStatus = 'Document approved successfully';"
			]
		},
		"documentRejected": {
			"name": "Document Rejected",
			"type": "compute",
			"code": [
				"// Document was rejected",
				"v:finalStatus = 'Document rejected';"
			]
		},
		"documentNeedsRevision": {
			"name": "Document Needs Revision",
			"type": "compute",
			"code": [
				"// Document needs revision",
				"v:finalStatus = 'Document requires revision';"
			]
		}
	}
}